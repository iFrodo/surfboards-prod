const openItem=e=>{var e=e.closest(".team__item"),t=e.find(".team__about"),a=t.find(".team__about-block").height(),l=e.find(".team__desc");e.addClass("active"),t.height(a),l.css("transform","rotate(60deg)")},closeEveryItem=e=>{var t=e.find(".team__about"),a=e.find(".team__item");e.find(".team__desc").css("transform","rotate(0deg)"),a.removeClass("active"),t.height(0)};$(".team__name").on("click",e=>{e=($this=$(e.currentTarget)).closest(".team");$this.closest(".team__item").hasClass("active")?closeEveryItem(e):(closeEveryItem(e),openItem($this))});let hamburgerMenu=document.querySelector("#burgerMenu"),hamburgerButton=document.querySelector("#burger"),prevButton=(hamburgerButton.addEventListener("click",function(e){e.preventDefault(),hamburgerButton.classList.toggle("burger--active"),hamburgerMenu.classList.toggle("menu--active"),document.body.classList.toggle("fancybox-active"),document.body.classList.toggle("compensate-for-scrollbar")}),document.querySelector(".boards__nav--prev")),nextButton=document.querySelector(".boards__nav--next"),slide=document.querySelector(".boards"),myMap;const init=()=>{myMap=new ymaps.Map("map",{center:[59.935274,30.312388],zoom:11});const t=new ymaps.GeoObjectCollection({},{draggable:!1,iconLayout:"default#image",iconImageHref:"./img/marker.svg",iconImageSize:[46,57],iconImageOffset:[-35,-52]});[[59.94554327989287,30.38935262114668],[59.91142323563909,30.50024587065841],[59.88693161784606,30.319658102103713],[59.97033574821672,30.315194906302924]].forEach(e=>{t.add(new ymaps.Placemark(e))}),myMap.geoObjects.add(t),myMap.behaviors.disable("scrollZoom")},validateFields=(ymaps.ready(init),(e,t)=>{return t.forEach(e=>{e.removeClass("input-error"),""===e.val().trim()&&e.addClass("input-error")}),0===e.find(".input-error").length});$(".form__btn").on("click",e=>{e.preventDefault();var e=$(".form"),t=e.find("[name = 'name']"),a=e.find("[name = 'phone']"),l=e.find(".form__input--textarea"),o=e.find("[name = 'to']");const r=$(".modal__content");(isValid=validateFields(e,[t,a,l,o]))&&((e=$.ajax({url:"https://webdev-api.loftschool.com/sendmail",method:"post",data:{name:t.val(),phone:a.val(),comment:l.val(),to:o.val()}})).done(e=>{r.removeClass("error-text"),r.text(e.message)}),e.fail(e=>{let t;t=e?.responseJSON?.message?responseJSON.message:"Произошла ошибка,попробуйте позже",r.text(t),r.addClass("error-text")}),e.always(()=>{$.fancybox.open({src:"#form-modal",type:"inline"})}))}),$(".btn--close").on("click",e=>{e.preventDefault(),$.fancybox.close()});let doFullpage=document.documentElement.clientWidth;$(document).ready(function(){$("#fullpage").fullpage({scrollOverflow:!1,autoScrolling:!1,scrollHorizontally:!0,verticalCentered:!1,fitToSection:!1,navigation:!0})}),$("[data-scroll-to]").on("click",e=>{e.preventDefault();e=$(e.currentTarget).attr("data-scroll-to"),e=$(`[data-section-id="${e}"]`).index();$.fn.fullpage.moveTo(e+1)});const player=$("#video-player")[0],playerContainer=$(".player"),playerStart=$(".player__start"),playerSplash=$(".player__splash"),volumeButton=$(".player__volume-ico"),volumeLevel=$(".player__volume-input");let interval,videoDuration=0;const changeVolume=()=>{player.volume=volumeLevel[0].value/10},soundOff=(volumeLevel.on("click",changeVolume),volumeLevel.on("mouseup",changeVolume),volumeLevel[0].min=0,volumeLevel[0].max=10,volumeLevel[0].value=volumeLevel[0].max,()=>{0===player.volume?(player.volume=soundLevel,volumeLevel[0].value=volumeLevel[0].max,volumeButton[0].innerHTML='<use xlink:href="./img/sprite.svg#btn-volume"></use>',volumeButton.value=10*soundLevel):(soundLevel=player.volume,player.volume=0,volumeButton[0].innerHTML='<use xlink:href="./img/sprite.svg#volume-off"></use>',volumeLevel[0].value=volumeLevel[0].min,volumeButton.value=0)}),formatTime=(volumeButton.on("click",e=>{soundOff()}),player.addEventListener("loadeddata",()=>{videoDuration=player.duration,$(".player__duration-estimate").text(formatTime(videoDuration))}),e=>{var e=Math.round(e),t=a(Math.floor(e/60));function a(e){return e<10?"0"+e:e}return t+" : "+a(e-60*t)}),onPlayerReady=()=>{void 0!==interval&&clearInterval(interval),interval=setInterval(()=>{var e=player.currentTime,t=e/videoDuration*100;$(".player__playback-button").css({left:t+"%"}),$(".player__duration-completed").text(formatTime(e))},1e3)};$(".player__playback").on("click",e=>{var t=$(e.currentTarget),e=e.originalEvent.layerX/t.width()*100,t=player.duration/100*e;$(".player__playback-button").css({left:e+"%"}),player.currentTime=t});let eventsInit=()=>{$(".player__start").on("click",e=>{e.preventDefault(),playerStart.hasClass("player__start--paused")?(playerStart.removeClass("player__start--paused"),playerSplash.removeClass("player__splash--active"),player.pause()):(playerStart.addClass("player__start--paused"),playerSplash.addClass("player__splash--active"),player.play())})};eventsInit(),onPlayerReady();const findBlockByAlias=a=>$(".reviews__item").filter((e,t)=>$(t).attr("data-linked-with")===a);$(".reviews__link").on("click",e=>{e.preventDefault();var e=$(e.currentTarget),t=e.attr("data-open"),t=findBlockByAlias(t),e=e.closest(".reviews__link");t.addClass("reviews__item--active").siblings().removeClass("reviews__item--active"),e.addClass("reviews__link--active").siblings().removeClass("reviews__link--active")});let mesure=(e,t)=>{var t=t.find(".horizontal-slider__title-box"),a=3*t.width(),l=document.documentElement.clientWidth<=768&&480<document.documentElement.clientWidth,o=document.documentElement.clientWidth<=481;return l?e.animate({width:document.documentElement.clientWidth-a}):o?e.animate({width:document.documentElement.clientWidth-t.width()}):e.animate({width:"520px"})};$(function(){$(".horizontal-slider__title-box").on("click",function(e){e.preventDefault();var e=$(this),t=e.closest(".horizontal-slider__list"),e=e.closest(".horizontal-slider__item"),t=t.find(".horizontal-slider__item"),a=t.filter(".active"),l=e.find(".horizontal-slider__content-box"),a=a.find(".horizontal-slider__content-box");e.hasClass("active")?(e.removeClass("active"),l.animate({width:"0px"})):(t.removeClass("active"),e.addClass("active"),a.animate({width:"0px"}),mesure(l,e))}),$(document).on("click",function(e){$(e.target).closest(".horizontal-slider__list").length||($(".horizontal-slider__content-box").animate({width:" "}),$(".horizontal-slider__item").removeClass("active"))})});const slider=$(".boards__list").bxSlider({pager:!1,controls:!1});$(".boards__nav--next").on("click",e=>{e.preventDefault(),slider.goToNextSlide()}),$(".boards__nav--prev").on("click",e=>{e.preventDefault(),slider.goToPrevSlide()});
